## 문제 3번

### 웹 브라우저에 네이버 를 검색하고 화면에 네이버 화면이 출력이 될 때 까지 내부적으로 어떤 동작들이 수행이 되는지 설명해주세요.

## 답변

### 순서별 작업에 따른 동작방식

### 1. www.naver.com을 브라우저 주소창에 친다.
### 2. Browser는 캐싱된 DNS 기록들을 통해 www.naver.com에 대응되는 IP주소가 있는지 확인한다.
DNS(Domain Name System)은 URL들의 이름과 IP주소를 저장하고 있는 데이터 베이스이다. 인터넷에 있는 모든 URL들에는 고유 IP 주소가 지정되어있다. 이 IP 주소를 통해서 해당 웹사이트를 호스팅하고 있는 서버 컴퓨터에 접근을 할 수 있다. 예를 들어 www.naver.com의 IP 주소를 알아보기 위해서는 터미널에 nslookup www.naver.com를 작성하여 해당 사이트의 IP 주소를 알 수 있다. 현재 내가 있는 지역에서 해당 명령어를 작성하였을 때 다음과 같이 IP주소가 223.130.195.95로 나왔고 해당 IP주소로 브라우저에 검색했을때 www.naver.com 으로 이동한것을 확인 할 수 있다.
```bash
nslookup www.naver.com
Server:		1.214.68.2
Address:	1.214.68.2#53

Non-authoritative answer:
www.naver.com	canonical name = www.naver.com.nheos.com.
Name:	www.naver.com.nheos.com
Address: 223.130.195.95
Name:	www.naver.com.nheos.com
Address: 223.130.195.200
```
(여기서 non-authoritative answer란, name 서버가 도메인에서 만든 원본 소스 파일을 갖고 있지 않다는 뜻이다. 이 서버에는 다른 DNS들에서 얻어진 도메인의 파일을 캐싱 형태로 갖고 있는 것이다.)
네이버를 사용하는 사용자가 매우 많기 때문에 네이버의 서버 IP 주소는 여러개가 있고 nslookup으로는 그 중 내가 접근이 가능한 IP 주소를 보여주는 것이다. 이처럼 DNS는 전화번호부와 비슷한 역할을 한다. 웹사이트의 이름들과 웹사이트를 접근하기 위해 필요한 IP주소를 저장하고 있다.
DNS의 가장 큰 목적은 편리함을 주기 위해서이다. 숫자로 된 IP 주소를 작성해도 원하는 웹사이트에 접속할 수 있지만, 매번 랜덤해보이는 숫자들을 검색하는 것은 매우 복잡한 일이다. 네이버, 다음, 구글 처럼 이름을 외우는것이 더 친숙하기 때문이다. DNS는 이처럼 사람들이 웹사이트 주소에 쉽게 접속할 수 있게 매핑을 해주는 역할을 한다.
웹사이트 이름을 브라우저에 검색하면 브라우저는 DNS 기록을 4가지의 캐시에서 확인을 한다.
- 가장 먼저 브라우저 캐시를 확인한다. 브라우저는 일정기간 동안(유저가 이전에 설정한)의 DNS 기록들을 저장하고 있다. DNS query가 이 곳에서 가장 먼저 실행이 된다.
- 그 다음에 브라우저는 OS 캐시를 확인한다. 브라우저 캐시에 웹사이트 이름의 IP 주소가 발견되지 않았다면, 브라우저는 systemcall을 통해서 OS가 저장하고 있는 DNS 기록들의 캐시에 접근한다.
- 그 다음에는 router캐시를 확인한다. 컴퓨터가 DNS기록을 찾지 못하면 브라우저는 DNS 기록을 캐시하고 있는 router와 통신을 해서 찾으려고 한다.
- 그래도 못 찾는다면 마지막으로, ISP캐시를 확인한다. ISP는 DNS 서버를 구축하고 있는 브라웢가 마지막으로 DNS 기록이 있기를 확인하기 위해 접근하게 된다.
이렇게 많은 곳에 캐시를 저장하는 이유는 캐시가 네트워크 트래픽을 조절하고 데이터 전송 시간을 줄이기 위해 매우 중요한 요소이기 때문이다.












